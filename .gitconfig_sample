[user]
	name = Valerii Savchenko\n\n
	email = valerii.s@giantleaplab.com
[alias]
  check = grep -n -e -P 'wellic|valerii'
  co = checkout
  ci = commit
#  ci = ! git commit -m $@ && git last
  ch = cherry-pick
  st = status
  br = branch
  rb = rebase
  rbi = rebase -i
  type = cat-file -t
  dump = cat-file -p
#  unstage = reset HEAD --
  unstage = ! git reset HEAD -- $@ && git status
  hist  = log         --pretty=format:\"%C(green)%h %C(yellow)%ad%C(cyan)%d%Creset | %s %C(black bold)[%an]%Creset \" --graph --date=short --decorate
  last  = log         --pretty=format:\"%C(green)%h %C(yellow)%ad%C(cyan)%d%Creset | %s %C(black bold)[%an]%Creset \" --graph --date=short --decorate -20
  mylog = log         --pretty=format:\"%C(green)%h %C(yellow)%ad%Creset | %s %C(black bold)[%an]%Creset \" --graph --date=short --decorate -20
  sshow = show --stat --pretty=format:\"%C(green)%h %C(yellow)%ad%C(cyan)%d%Creset | %s %C(black bold)[%an]%Creset \" --graph --date=short --decorate --no-notes
  visual = !gitk &
  amend = commit --amend -C HEAD
  ins = ! git add -- $@ && git status
# see git gi list
  gi = "!gi() { curl -L -s https://www.gitignore.io/api/$@ ;}; gi"


  df = diff
  df0 = diff -U0
  dfc = diff --cached
  lg = log -p
  lol = log --graph --decorate --pretty=oneline --abbrev-commit
  lola = log --graph --decorate --pretty=oneline --abbrev-commit --all
  ls = ls-files
# Show files ignored by git:
  ign = ls-files -o -i --exclude-standard
#  to see the list of the ignored files.
  ignored = !git ls-files -v | grep ^[a-z]
# temporarily ignoring file
  ignore = update-index --assume-unchanged
  unignore = update-index --no-assume-unchanged
  merged = branch --merged
  unmerged = branch --no-merged

fsckclear = "! f(){ \
    echo "= git fsck"                                          && git fsck \
    && echo "= git reflog expire --expire-unreachable=now --all"  && git reflog expire --expire-unreachable=now --all \
    && echo "= git gc --prune prunefsck"                          && git gc --prune=now \
    && echo "= git fsck"                                          && git fsck ;}; f"

#update = ! master=${1:-master} && cfg=${2:-cfg} && fix=${3:-fix} && git co $master && git rb $master $cfg && git rb $cfg $fix
#fullupdate = ! master=${1:-master} && cfg=${2:-cfg} && fix=${3:-fix} && git co $master && git pull --rebase && git update

svnlog = !git svn log --oneline -20 | sort
#  pushmaster = ! echo =  push_u_origin_master && git push -u origin master

pushall      = ! echo "=  pushall"         && git push --all origin
#pushallforce = ! echo "=  pushallforce"    && echo git push --all --force origin
pushallforce = ! echo "=  pushallforce"    && git push --all --force origin
svndcommit   = ! echo "=  git svn dcommit" && git svn dcommit

copy2tmp = "! f(){ \
 user=wellic \
 && tmpbranch=tmp_${user} \
 && cbr=$(git rev-parse --abbrev-ref HEAD) \
 && echo "=   copy2tmp" \
 && echo "==  copy2tmp 1: git add ."                                      && git add . \
 && echo "==  copy2tmp 2: git ci -am 'tmp_'${cbr}_$(date +%y%m%d_%H%M%S)" && git ci -am 'tmp_'${cbr}_$(date +%y%m%d_%H%M%S) \
 && echo "==  copy2tmp 3: git push -f origin $cbr:$tmpbranch"             && git push -f origin $cbr:$tmpbranch \
 && echo "==  copy2tmp 4: git reset HEAD~1"                               && git reset HEAD~1 \
 && echo '---------------' \
 && git st ;}; f"

backupcfg = "! f(){ \
 user=wellic \
 && cfg=${1:-cfg} \
 && tmpbranch=${cfg}_${user} \
 && cbr=cfg \
 && echo "=   backupcfg" \
 && echo "==  backupcfg 1: git push -f origin $cbr:$tmpbranch" && git push -f origin $cbr:$tmpbranch \
 && echo '---------------' \
 && git st ;}; f"

preparefix = "! f(){ \
 cbr=$(git rev-parse --abbrev-ref HEAD) \
 && git rb $cbr fix \
 && git updatesvn ;}; f"

uploadsvn = "! f(){ \
 fix=${1:-fix} && cfg=${2:-cfg} && master=${3:-master} \
 && echo "=  uploadsvn $fix $cfg $master " \
 && git pushallforce \
 && git updatesvn $fix $cfg $master \
 && git loadsvn $fix $cfg $master \
 && git svndcommit \
 && git updatesvn $fix $cfg $master  \
 && git pushallforce \
 && echo "=====" && git last \
 && echo "=====" && git svnlog ;}; f"


updatesvn = "! f(){ \
 fix=${1:-fix} && cfg=${2:-cfg} && master=${3:-master} \
 && echo "=  updatesvn ${fix} ${cfg} ${master} " \
 && echo "== git co $master"       && git co $master  \
 && echo "== git svn rebase"       && git svn rebase \
 && echo "== git rb $master $cfg"  && git rb $master $cfg \
 && echo "== git rb $cfg $fix"     && git rb $cfg $fix ;}; f"

loadsvn = "! f(){ \
 fix=${1:-fix} && cfg=${2:-cfg} && master=${3:-master} \
 && echo "=  loadsvn $fix $cfg $master " \
 && echo "== git co $fix"                      && git co $fix \
 && echo "== git rb --onto $master $cfg $fix"  && git rb --onto $master $cfg $fix  \
 && echo "== git co $master"                   && git co $master \
 && echo "== git rebase $fix $master"          && git rebase $fix $master ;}; f"

# загрузить свои изменения в ветку master из ветки fix исключая коммиты ветки cfg (master)
load = "! f(){ \
 fix=${1:-fix} && cfg=${2:-cfg} && master=${3:-master} \
 && echo "=  load $fix $cfg $master " \
 && echo "== load 1: git co $fix"                      && git co $fix \
 && echo "== load 2: git rb --onto $master $cfg $fix"  && git rb --onto $master $cfg $fix  \
 && echo "== load 3: git co $master"                   && git co $master \
 && echo "== load 4: git rebase $fix $master"          && git rebase $fix $master ;}; f"

# Обновить ветки cfg и fix новыми комитами из мастера. (fix)
update = "! f(){ \
 fix=${1:-fix} && cfg=${2:-cfg} && master=${3:-master} \
 && echo "=  update ${fix} ${cfg} ${master} " \
 && echo "== update 1: git co $master"      && git co $master  \
 && echo "== update 2: git pull --rebase"   && git pull --rebase \
 && echo "== update 3: git rb $master $cfg" && git rb $master $cfg \
 && echo "== update 4: git rb $cfg $fix"    && git rb $cfg $fix ;}; f"

# Залить вести master, cfg и fix в origin. (fix)
upload = "! f(){ \
 fix=${1:-fix} && cfg=${2:-cfg} && master=${3:-master} \
 && echo "=  upload $fix $cfg $master " \
 && echo "== upload 1: "                                && git update $fix $cfg $master \
 && echo "== upload 2: "                                && git load $fix $cfg $master \
 && echo "== upload 3: git push origin $master:$master" && git push origin $master:$master \
 && echo "== upload 4: "                                && git update $fix $cfg $master \
 && echo "== upload 5: git backupcfg"                   && git backupcfg \
 && echo "== update 6: git co $fix"                     && git co $fix   \
 && echo "=====" && git last ;}; f"


[commit]
	template = /home/wellic/.gitmessage_template
[color]
	ui = true
	status = true
	diff = true
	branch = true
	interactive = true
	pager = true
	grep = true
[color "log"]
    current = green    
    local = yellow
    remote = green reverse
[color "branch"]
    current = green    
    local = yellow
    remote = green reverse
[color "diff"]
    commit = yellow bold 
    meta = normal bold
    frag = magenta bold
    old = red
    new = green
    whitespace = red reverse blink
    plain = normal
    func = normal
[color "status"]
    added = yellow  
    changed = green
    untracked = cyan
[core]
    whitespace = fix,-indent-with-non-tab,trailing-space,cr-at-eol
    pager = less -FXRS
	editor = mcedit
	autocrlf = false
	safecrlf = false
	eol = native
#    FOR WIN
#    pager = more
#    git config --global core.autocrlf true
#    git config --global core.safecrlf true
[blame]
	data = short
[gui]
	spellingdictionary = en_GB
[merge]
	tool = kdiff3
    guitool = kdiff3
[diff]
	tool = kdiff3
	guitool = kdiff3
[difftool]
	prompt = false
[mergetool]
	prompt = true
[help]
    autocorrect = 1
[http]
	sslverify = false
[push]
    default = upstream